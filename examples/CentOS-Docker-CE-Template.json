{
    "label":"Docker-CE for Centos",
    "version":"0.1",
    "commands":[ 
        {
            "type":"execute",
            "note":"Disable SELINUX (Older CentOS bug)",
            "path":"/usr/sbin/setenforce",
            "args":"0",
            "watch": true
        },
        {
            "type":"execute",            
            "note":"Upgrade all packages (except VMware Tools)",            
            "path":"/bin/yum",
            "args":"upgrade --exclude=open-vm-tools -y > /tmp/ce-yum-upgrade.log",
            "watch": true
        },
        {
            "type":"execute",            
            "note":"Re-Enable SELINUX",
            "path":"/usr/sbin/setenforce",
            "args":"1",
            "watch": true
        },
        {
            "type":"execute",            
            "note":"Remove any pre-existing Docker Installation",            
            "path":"/bin/yum",
            "args":"remove docker docker-common docker-selinux docker-engine",
            "watch": true
        },
        {
            "type":"execute",            
            "note":"Install Docker-CE Supporting tools",            
            "path":"/bin/yum",
            "args":"install -y yum-utils device-mapper-persistent-data lvm2 -y > /tmp/ce-docker-deps.log",
            "watch": true
        },
        {
            "type":"execute",            
            "note":"Add Docker CE Repository",            
            "path":"/usr/bin/yum-config-manager",
            "args":"--add-repo https://download.docker.com/linux/centos/docker-ce.repo",
            "watch": true
        },
        {
            "type":"execute",            
            "note":"Update Yum Cache",            
            "path":"/bin/yum",
            "args":"-y makecache fast",
            "watch": true
        },
        {
            "type":"execute",            
            "note":"Installation of Docker-CE",            
            "path":"/bin/yum",
            "args":"-y install docker-ce > /tmp/ce-docker-install.log",
            "watch": true
        },
        {
            "type":"execute",            
            "note":"Enable Docker on Boot",            
            "path":"/usr/bin/systemctl",
            "args":"enable docker",
            "watch": true
        }
    ]
}